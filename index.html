<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlowState OS ‚Äî ADHD Operating System</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#04040a;--s1:#080814;--s2:#0c0c1a;--s3:#101020;
  --border:rgba(255,255,255,0.06);--border2:rgba(255,255,255,0.12);--border3:rgba(255,255,255,0.2);
  --v:#7c3aed;--v2:#9333ea;--v3:#a855f7;--v4:#c084fc;
  --ind:#4f46e5;--fuch:#d946ef;--cyan:#06b6d4;--em:#10b981;--amb:#f59e0b;--rose:#f43f5e;
  --text:#f1f5f9;--t2:#94a3b8;--t3:#475569;--t4:#1e293b;
}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;font-size:14px;}

/* Cursor */
.cur{position:fixed;width:9px;height:9px;background:var(--v3);border-radius:50%;pointer-events:none;z-index:9999;mix-blend-mode:screen;transition:transform .15s;}
.cur-r{position:fixed;width:34px;height:34px;border:1.5px solid rgba(168,85,247,0.35);border-radius:50%;pointer-events:none;z-index:9998;transition:all .1s;}
/* Noise */
body::after{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");pointer-events:none;z-index:10000;opacity:0.55;}
/* Orbs */
.orb{position:fixed;border-radius:50%;pointer-events:none;filter:blur(80px);}
.o1{width:650px;height:650px;top:-180px;left:-180px;background:radial-gradient(circle,rgba(109,40,217,0.22),transparent 70%);}
.o2{width:480px;height:480px;top:38%;right:-120px;background:radial-gradient(circle,rgba(124,58,237,0.18),transparent 70%);}
.o3{width:560px;height:560px;bottom:-80px;left:28%;background:radial-gradient(circle,rgba(76,29,149,0.2),transparent 70%);}
.o4{width:280px;height:280px;top:18%;left:52%;background:radial-gradient(circle,rgba(217,70,239,0.1),transparent 70%);}
/* Grid */
.grid-bg{position:fixed;inset:0;pointer-events:none;background-image:linear-gradient(rgba(124,58,237,0.035) 1px,transparent 1px),linear-gradient(90deg,rgba(124,58,237,0.035) 1px,transparent 1px);background-size:64px 64px;mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 40%,transparent 100%);}
.confetti-wrap{position:fixed;inset:0;pointer-events:none;z-index:9991;overflow:hidden;}
.cp{position:absolute;width:7px;height:7px;border-radius:2px;opacity:0;animation:cf 2.5s ease-in forwards;}
@keyframes cf{0%{opacity:1;transform:translateY(-10px) rotate(0)}100%{opacity:0;transform:translateY(100vh) rotate(720deg)}}

.app{position:relative;z-index:1;max-width:1380px;margin:0 auto;padding:0 2rem 5rem;}

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes rise{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
@keyframes livePulse{0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,0.5)}50%{box-shadow:0 0 0 5px rgba(16,185,129,0)}}
@keyframes pBump{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
@keyframes streakPop{0%,100%{box-shadow:0 0 18px rgba(124,58,237,0.45)}50%{box-shadow:0 0 30px rgba(124,58,237,0.75)}}
@keyframes flash{0%{opacity:1}100%{opacity:0}}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.header{padding:2rem 0 1.75rem;display:grid;grid-template-columns:1fr auto;align-items:start;gap:2rem;opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .08s forwards;}
.logo-pill{display:inline-flex;align-items:center;gap:.45rem;background:rgba(124,58,237,0.1);border:1px solid rgba(124,58,237,0.22);border-radius:100px;padding:.28rem .9rem;font-family:'DM Mono',monospace;font-size:.62rem;letter-spacing:.15em;text-transform:uppercase;color:var(--v3);margin-bottom:.55rem;}
.live-dot{width:6px;height:6px;background:var(--em);border-radius:50%;animation:livePulse 2s ease infinite;}
.logo-name{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(2.6rem,5vw,4.2rem);letter-spacing:-.04em;line-height:.9;background:linear-gradient(135deg,#fff 0%,#c4b5fd 38%,#e879f9 78%,#f472b6 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.logo-sub{font-size:.92rem;color:var(--t2);margin-top:.45rem;display:flex;align-items:center;gap:.5rem;}
.ver-tag{font-family:'DM Mono',monospace;font-size:.56rem;background:rgba(124,58,237,0.1);border:1px solid rgba(124,58,237,0.2);padding:.12rem .45rem;border-radius:4px;color:var(--v3);}
.header-r{display:flex;flex-direction:column;align-items:flex-end;gap:.55rem;}
.hdate{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--t3);letter-spacing:.06em;}
.pill{display:inline-flex;align-items:center;gap:.45rem;border-radius:100px;padding:.4rem 1rem;font-size:.8rem;font-weight:600;}
.pill-streak{background:linear-gradient(135deg,rgba(245,158,11,.12),rgba(239,68,68,.08));border:1px solid rgba(245,158,11,.22);color:var(--amb);}
.pill-pts{background:rgba(124,58,237,.1);border:1px solid rgba(124,58,237,.22);color:var(--v3);}
.pill-elite{background:linear-gradient(135deg,rgba(124,58,237,.15),rgba(217,70,239,.1));border:1px solid rgba(124,58,237,.35);color:var(--v4);box-shadow:0 0 20px rgba(124,58,237,.18);}

/* ‚îÄ‚îÄ SECTION LABEL ‚îÄ‚îÄ */
.slabel{font-family:'DM Mono',monospace;font-size:.58rem;letter-spacing:.18em;text-transform:uppercase;color:var(--t3);margin-bottom:.85rem;display:flex;align-items:center;gap:.5rem;}
.slabel::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--t4),transparent);}

/* ‚îÄ‚îÄ SETUP ‚îÄ‚îÄ */
.setup-sec{margin-bottom:1.4rem;opacity:0;animation:rise .9s ease .14s forwards;}
.setup-card{background:linear-gradient(135deg,rgba(16,185,129,.055),rgba(6,182,212,.035));border:1px solid rgba(16,185,129,.14);border-radius:20px;padding:1.6rem;position:relative;overflow:hidden;}
.setup-card::before{content:'';position:absolute;top:-35%;right:-8%;width:360px;height:360px;border-radius:50%;background:radial-gradient(circle,rgba(16,185,129,.055),transparent 70%);pointer-events:none;}
.setup-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.15rem;}
.setup-title{font-family:'Syne',sans-serif;font-size:1.05rem;font-weight:800;display:flex;align-items:center;gap:.55rem;}
.setup-meta{font-size:.72rem;color:var(--t2);font-family:'DM Mono',monospace;letter-spacing:.05em;margin-top:.2rem;}
.setup-pct{font-family:'Syne',sans-serif;font-size:1.4rem;font-weight:800;color:var(--em);}
.setup-steps{display:grid;grid-template-columns:repeat(5,1fr);gap:.7rem;}
.sstep{background:var(--s2);border:1px solid var(--border);border-radius:13px;padding:.9rem .8rem;cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1);position:relative;}
.sstep:hover{transform:translateY(-2px);border-color:var(--border2);}
.sstep.done{background:rgba(16,185,129,.08);border-color:rgba(16,185,129,.26);}
.sstep.done::after{content:'‚úì';position:absolute;top:.55rem;right:.65rem;font-size:.62rem;color:var(--em);font-weight:700;}
.sstep.active-s{background:rgba(124,58,237,.09);border-color:rgba(124,58,237,.34);box-shadow:0 0 18px rgba(124,58,237,.14);}
.ss-num{font-family:'DM Mono',monospace;font-size:.58rem;color:var(--t3);margin-bottom:.35rem;letter-spacing:.08em;}
.ss-ico{font-size:1.25rem;margin-bottom:.35rem;display:block;}
.ss-nm{font-size:.7rem;font-weight:600;line-height:1.3;}
.ss-ds{font-size:.6rem;color:var(--t3);margin-top:.18rem;line-height:1.4;}
.setup-bar{height:3px;background:rgba(255,255,255,.05);border-radius:100px;overflow:hidden;margin-top:.9rem;}
.setup-fill{height:100%;background:linear-gradient(90deg,var(--em),var(--cyan));border-radius:100px;transition:width .8s cubic-bezier(.34,1.56,.64,1);box-shadow:0 0 8px rgba(16,185,129,.45);width:0%;}

/* ‚îÄ‚îÄ ENERGY ‚îÄ‚îÄ */
.energy-sec{margin-bottom:1.2rem;opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .2s forwards;}
.energy-row{display:grid;grid-template-columns:repeat(3,1fr);gap:.85rem;}
.en-card{position:relative;overflow:hidden;cursor:pointer;padding:1.35rem;border-radius:18px;background:var(--s1);border:1px solid var(--border);transition:all .3s cubic-bezier(.16,1,.3,1);}
.en-card::before{content:'';position:absolute;inset:0;border-radius:18px;opacity:0;transition:opacity .3s;}
.en-card.low::before{background:linear-gradient(135deg,rgba(100,116,139,.12),transparent);}
.en-card.med::before{background:linear-gradient(135deg,rgba(79,70,229,.18),rgba(124,58,237,.08));}
.en-card.hi::before{background:linear-gradient(135deg,rgba(217,70,239,.18),rgba(124,58,237,.1));}
.en-card:hover::before,.en-card.active::before{opacity:1;}
.en-card:hover{transform:translateY(-2px);}
.en-card.active{box-shadow:0 0 0 1px rgba(124,58,237,.5),0 18px 50px rgba(124,58,237,.2);}
.en-card.active.low{box-shadow:0 0 0 1px rgba(100,116,139,.45),0 16px 36px rgba(100,116,139,.15);}
.en-card.active.hi{box-shadow:0 0 0 1px rgba(217,70,239,.5),0 18px 44px rgba(217,70,239,.18);}
.en-dot{position:absolute;top:.9rem;right:.9rem;width:7px;height:7px;border-radius:50%;border:2px solid var(--border2);transition:all .3s;}
.en-card.active .en-dot{background:var(--v3);border-color:var(--v3);box-shadow:0 0 8px var(--v3);}
.en-emoji{font-size:1.7rem;margin-bottom:.55rem;display:block;position:relative;z-index:1;}
.en-title{font-family:'Syne',sans-serif;font-size:.92rem;font-weight:700;position:relative;z-index:1;margin-bottom:.22rem;}
.en-desc{font-size:.7rem;color:var(--t2);line-height:1.5;position:relative;z-index:1;}
.en-hint{font-size:.63rem;color:var(--t3);margin-top:.45rem;font-family:'DM Mono',monospace;position:relative;z-index:1;}

/* ‚îÄ‚îÄ MOMENTUM ‚îÄ‚îÄ */
.mom-sec{margin-bottom:1.2rem;opacity:0;animation:rise .9s ease .25s forwards;}
.mom-card{background:linear-gradient(135deg,rgba(124,58,237,.065),rgba(79,70,229,.04));border:1px solid rgba(124,58,237,.14);border-radius:20px;padding:1.55rem;position:relative;overflow:hidden;}
.mom-card::before{content:'';position:absolute;top:0;right:0;width:280px;height:280px;background:radial-gradient(circle,rgba(217,70,239,.065),transparent 70%);pointer-events:none;}
.mom-inner{display:grid;grid-template-columns:auto 1fr auto;gap:1.8rem;align-items:center;}
.ring-wrap{position:relative;width:104px;height:104px;flex-shrink:0;}
.ring-svg{width:104px;height:104px;transform:rotate(-90deg);}
.ring-bg{fill:none;stroke:rgba(255,255,255,.06);stroke-width:8;}
.ring-fill{fill:none;stroke-width:8;stroke-linecap:round;stroke-dasharray:283;stroke-dashoffset:283;stroke:url(#rg);transition:stroke-dashoffset 1.8s cubic-bezier(.34,1.56,.64,1);}
.ring-lbl{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.ring-pct{font-family:'Syne',sans-serif;font-size:1.45rem;font-weight:800;line-height:1;background:linear-gradient(135deg,var(--v3),var(--fuch));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.ring-sub{font-family:'DM Mono',monospace;font-size:.48rem;color:var(--t3);letter-spacing:.08em;margin-top:.12rem;}
.mom-mid{display:flex;flex-direction:column;gap:.8rem;}
.mom-ttl{font-family:'Syne',sans-serif;font-size:.82rem;font-weight:700;color:var(--t2);text-transform:uppercase;letter-spacing:.08em;}
.mom-bar-track{height:7px;background:rgba(255,255,255,.06);border-radius:100px;overflow:hidden;}
.mom-bar-fill{height:100%;border-radius:100px;background:linear-gradient(90deg,var(--ind),var(--v),var(--fuch));box-shadow:0 0 12px rgba(124,58,237,.5);transition:width .9s ease;}
.mom-bar-labels{display:flex;justify-content:space-between;font-family:'DM Mono',monospace;font-size:.58rem;color:var(--t3);margin-top:.35rem;}
.mom-compare .up{color:var(--em);font-weight:600;font-size:.76rem;}
.elite-pill{display:inline-flex;align-items:center;gap:.45rem;padding:.45rem .9rem;border-radius:100px;font-size:.72rem;font-weight:700;font-family:'Syne',sans-serif;background:linear-gradient(135deg,rgba(124,58,237,.2),rgba(217,70,239,.12));color:var(--v4);border:1px solid rgba(124,58,237,.35);box-shadow:0 0 18px rgba(124,58,237,.2);}
.mom-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:.45rem;}
.ms{text-align:center;padding:.55rem .45rem;background:rgba(255,255,255,.025);border-radius:9px;border:1px solid var(--border);}
.ms-n{font-family:'Syne',sans-serif;font-size:1.25rem;font-weight:800;display:block;}
.ms-l{font-family:'DM Mono',monospace;font-size:.52rem;color:var(--t3);text-transform:uppercase;letter-spacing:.05em;margin-top:.12rem;}

/* ‚îÄ‚îÄ MAIN GRID ‚îÄ‚îÄ */
.main-grid{display:grid;grid-template-columns:1fr 330px;gap:1rem;margin-bottom:1rem;}
.card{background:var(--s1);border:1px solid var(--border);border-radius:20px;padding:1.5rem;position:relative;overflow:hidden;transition:border-color .3s;}
.card:hover{border-color:var(--border2);}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.065),transparent);}
.card-hd{display:flex;align-items:center;gap:.6rem;margin-bottom:1.2rem;font-family:'DM Mono',monospace;font-size:.62rem;letter-spacing:.12em;text-transform:uppercase;color:var(--t3);}
.hdi{width:26px;height:26px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:.82rem;flex-shrink:0;}
.hdi-v{background:rgba(124,58,237,.14);}
.hdi-e{background:rgba(16,185,129,.11);}
.hdi-a{background:rgba(245,158,11,.11);}
.cbadge{font-family:'DM Mono',monospace;font-size:.56rem;padding:.12rem .45rem;border-radius:4px;background:rgba(124,58,237,.1);color:var(--v3);border:1px solid rgba(124,58,237,.2);}

/* TASKS */
.tasks-card{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .3s forwards;}
.task{display:flex;align-items:center;gap:.85rem;padding:.88rem .95rem;background:var(--s2);border:1px solid var(--border);border-radius:13px;margin-bottom:.45rem;cursor:pointer;transition:all .22s cubic-bezier(.16,1,.3,1);position:relative;overflow:hidden;}
.task::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;border-radius:0 2px 2px 0;}
.task.crit::before{background:linear-gradient(180deg,var(--rose),#be123c);}
.task.high::before{background:linear-gradient(180deg,var(--amb),#d97706);}
.task.med::before{background:linear-gradient(180deg,var(--ind),var(--v));}
.task:hover{transform:translateX(3px);border-color:var(--border2);background:rgba(255,255,255,.025);}
.task.done{opacity:.35;}
.task.done .tname{text-decoration:line-through;color:var(--t3);}
.tcb{width:22px;height:22px;border-radius:50%;flex-shrink:0;border:2px solid var(--border2);display:flex;align-items:center;justify-content:center;font-size:.65rem;transition:all .22s;color:transparent;}
.task:hover .tcb{border-color:var(--em);}
.task.done .tcb{background:var(--em);border-color:var(--em);color:#fff;}
.tbody{flex:1;min-width:0;}
.tname{font-size:.88rem;font-weight:500;margin-bottom:.22rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ttags{display:flex;gap:.35rem;flex-wrap:wrap;}
.tag{font-family:'DM Mono',monospace;font-size:.58rem;padding:.12rem .45rem;border-radius:4px;}
.tc{background:rgba(244,63,94,.11);color:var(--rose);}
.th{background:rgba(245,158,11,.11);color:var(--amb);}
.tm{background:rgba(99,102,241,.11);color:#818cf8;}
.tn{background:rgba(255,255,255,.055);color:var(--t2);}
.tpts{font-family:'DM Mono',monospace;font-size:.65rem;color:var(--amb);background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.14);padding:.18rem .45rem;border-radius:6px;white-space:nowrap;flex-shrink:0;}
.tex{font-size:.62rem;color:var(--t3);flex-shrink:0;transition:color .2s;cursor:pointer;}
.task:hover .tex{color:var(--v3);}
.add-btn{width:100%;padding:.82rem;background:transparent;border:1px dashed rgba(255,255,255,.09);border-radius:13px;color:var(--t3);font-family:'DM Sans',sans-serif;font-size:.82rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.45rem;margin-top:.35rem;}
.add-btn:hover{border-color:var(--v);color:var(--v3);background:rgba(124,58,237,.04);}
.divline{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.055),transparent);margin:1.15rem 0;}
.overdue-hd{display:flex;align-items:center;gap:.45rem;font-family:'DM Mono',monospace;font-size:.58rem;letter-spacing:.1em;text-transform:uppercase;color:var(--rose);margin-bottom:.7rem;}
/* subtask */
.sub-drawer{display:none;padding:.45rem 0 .2rem 2.4rem;border-top:1px solid var(--border);margin-top:.45rem;}
.sub-drawer.open{display:block;}
.sub-item{display:flex;align-items:center;gap:.55rem;padding:.4rem 0;font-size:.75rem;color:var(--t2);cursor:pointer;transition:color .18s;}
.sub-item:hover{color:var(--text);}
.scb{width:13px;height:13px;border-radius:3px;border:1.5px solid var(--border2);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:.52rem;color:transparent;transition:all .2s;}
.sub-item.sd .scb{background:var(--em);border-color:var(--em);color:#fff;}
.sub-item.sd span{text-decoration:line-through;color:var(--t4);}

/* RIGHT COLUMN */
.right-col{display:flex;flex-direction:column;gap:1rem;}
/* POINTS */
.pts-card{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .35s forwards;background:linear-gradient(135deg,#0a0818,#0d0a1e);}
.pts-main{text-align:center;padding:.7rem 0 .9rem;}
.pts-num{font-family:'Syne',sans-serif;font-weight:800;font-size:3.6rem;letter-spacing:-.05em;line-height:1;background:linear-gradient(135deg,#fbbf24,#f97316,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;transition:transform .3s;}
.pts-num.bump{animation:pBump .4s cubic-bezier(.34,1.56,.64,1);}
.pts-sub{font-family:'DM Mono',monospace;font-size:.6rem;letter-spacing:.14em;text-transform:uppercase;color:var(--t3);margin-top:.25rem;}
.pts-earned{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--em);height:18px;text-align:center;margin-top:.18rem;}
.bar-wrap{height:4px;background:rgba(255,255,255,.045);border-radius:100px;overflow:hidden;margin:.8rem 0 .45rem;}
.bar-fill{height:100%;border-radius:100px;background:linear-gradient(90deg,#f59e0b,#f97316,#ec4899);box-shadow:0 0 10px rgba(249,115,22,.45);transition:width .7s cubic-bezier(.34,1.56,.64,1);}
.bar-lbl{display:flex;justify-content:space-between;font-family:'DM Mono',monospace;font-size:.6rem;color:var(--t3);}
.tiers{display:grid;grid-template-columns:repeat(4,1fr);gap:.35rem;margin-top:.82rem;}
.tier{text-align:center;padding:.55rem .2rem;border-radius:9px;font-size:.6rem;font-family:'DM Mono',monospace;transition:all .25s;}
.tier .tem{display:block;font-size:.95rem;margin-bottom:.18rem;}
.tier .tpt{display:block;font-size:.52rem;opacity:.55;margin-top:.12rem;}
.t-br{background:rgba(205,127,50,.09);color:#cd7f32;border:1px solid rgba(205,127,50,.14);}
.t-si{background:rgba(192,192,192,.07);color:#c0c0c0;border:1px solid rgba(192,192,192,.12);}
.t-go{background:rgba(245,158,11,.1);color:var(--amb);border:1px solid rgba(245,158,11,.18);}
.t-pl{background:rgba(124,58,237,.1);color:var(--v3);border:1px solid rgba(124,58,237,.2);}
.tier.active-t{transform:scale(1.08);box-shadow:0 0 18px currentColor,0 0 0 1px currentColor;}
.reward-box{margin-top:.82rem;padding:.7rem;border-radius:11px;background:linear-gradient(135deg,rgba(245,158,11,.07),rgba(124,58,237,.05));border:1px solid rgba(245,158,11,.14);font-size:.7rem;color:var(--t2);line-height:1.5;cursor:pointer;transition:all .2s;}
.reward-box:hover{border-color:rgba(245,158,11,.28);}
.reward-box strong{color:var(--amb);}

/* MOOD */
.mood-card{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .4s forwards;}
.mood-row{display:grid;grid-template-columns:repeat(5,1fr);gap:.35rem;}
.mb{aspect-ratio:1;border-radius:11px;border:1px solid var(--border);background:var(--s2);font-size:1.45rem;cursor:pointer;transition:all .22s cubic-bezier(.34,1.56,.64,1);display:flex;align-items:center;justify-content:center;}
.mb:hover{transform:scale(1.18);border-color:var(--border2);}
.mb.sel{border-color:var(--v);background:rgba(124,58,237,.14);box-shadow:0 0 18px rgba(124,58,237,.3);transform:scale(1.1);}
.mood-lbl{text-align:center;font-family:'DM Mono',monospace;font-size:.63rem;color:var(--t3);margin-top:.7rem;min-height:1.1em;}
.burnout{margin-top:.7rem;padding:.7rem;border-radius:9px;background:rgba(244,63,94,.07);border:1px solid rgba(244,63,94,.2);font-size:.7rem;color:var(--rose);line-height:1.5;display:none;}
.burnout.show{display:block;}

/* TOGGLE (Notion-style) */
.toggle-wrap{margin-bottom:.35rem;}
.toggle-head{display:flex;align-items:center;gap:.55rem;cursor:pointer;padding:.5rem 0;user-select:none;}
.toggle-arrow{font-size:.65rem;color:var(--t3);transition:transform .2s;flex-shrink:0;}
.toggle-head.open .toggle-arrow{transform:rotate(90deg);}
.toggle-title{font-size:.88rem;font-weight:500;color:var(--t1, var(--text));}
.toggle-body{display:none;padding-left:1.25rem;padding-top:.3rem;}
.toggle-body.open{display:block;}

/* ‚îÄ‚îÄ BOTTOM GRID ‚îÄ‚îÄ */
.bot-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;margin-bottom:1rem;}
/* Brain Dump */
.dump-card{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .45s forwards;}
.dump-ta{width:100%;min-height:122px;background:var(--s2);border:1px solid var(--border);border-radius:13px;padding:.95rem;color:var(--text);font-family:'DM Sans',sans-serif;font-size:.84rem;resize:none;outline:none;transition:all .22s;line-height:1.65;}
.dump-ta::placeholder{color:var(--t4);}
.dump-ta:focus{border-color:rgba(124,58,237,.4);box-shadow:0 0 0 3px rgba(124,58,237,.07);}
.dump-foot{display:flex;align-items:center;justify-content:space-between;margin-top:.55rem;}
.dump-hint{font-size:.65rem;color:var(--t3);}
.dump-btn{font-size:.72rem;font-weight:500;padding:.38rem .85rem;cursor:pointer;background:rgba(124,58,237,.11);border:1px solid rgba(124,58,237,.24);border-radius:7px;color:var(--v3);font-family:'DM Sans',sans-serif;transition:all .2s;}
.dump-btn:hover{background:rgba(124,58,237,.2);}
.dump-tip{font-size:.65rem;color:var(--t3);margin-top:.45rem;padding:.45rem .7rem;background:rgba(255,255,255,.025);border-radius:7px;border:1px solid var(--border);display:none;}
/* Streak */
.streak-card{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .5s forwards;}
.week-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.3rem;margin-bottom:1rem;}
.sday{aspect-ratio:1;border-radius:8px;display:flex;align-items:center;justify-content:center;font-family:'DM Mono',monospace;font-size:.56rem;font-weight:500;opacity:0;transform:scale(.4);}
.sday.done-d{background:linear-gradient(135deg,var(--em),#059669);box-shadow:0 0 12px rgba(16,185,129,.32);color:#fff;}
.sday.today-d{background:linear-gradient(135deg,var(--v),var(--v2));color:#fff;animation:streakPop 2s ease infinite;}
.sday.empty-d{background:var(--s2);border:1px solid var(--border);color:var(--t4);}
.streak-big{font-family:'Syne',sans-serif;font-weight:800;font-size:3rem;letter-spacing:-.05em;line-height:1;background:linear-gradient(135deg,var(--em),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.streak-lbl{font-family:'DM Mono',monospace;font-size:.6rem;color:var(--t3);margin-top:.22rem;letter-spacing:.05em;}
.streak-next{margin-top:.82rem;font-size:.7rem;color:var(--t2);line-height:1.5;background:rgba(245,158,11,.055);border:1px solid rgba(245,158,11,.12);border-radius:9px;padding:.55rem .7rem;}
/* Reset */
.reset-card{opacity:0;animation:rise .9s ease .52s forwards;background:linear-gradient(135deg,rgba(244,63,94,.045),rgba(124,58,237,.035));border-color:rgba(244,63,94,.11);}
.reset-btns{display:grid;grid-template-columns:1fr 1fr;gap:.45rem;margin-top:.82rem;}
.rbtn{padding:.6rem;border-radius:11px;border:1px solid var(--border);background:var(--s2);font-family:'DM Sans',sans-serif;font-size:.72rem;font-weight:500;color:var(--t2);cursor:pointer;transition:all .2s;text-align:center;}
.rbtn:hover{border-color:var(--border2);color:var(--text);transform:translateY(-1px);}
.rbtn.rp{background:linear-gradient(135deg,rgba(244,63,94,.14),rgba(124,58,237,.09));border-color:rgba(244,63,94,.24);color:var(--rose);font-weight:600;}
.rbtn.rp:hover{box-shadow:0 4px 18px rgba(244,63,94,.2);}
.ritual{display:none;margin-top:.82rem;}
.ritual.open{display:block;}
.rstep{display:flex;align-items:center;gap:.7rem;padding:.65rem;background:var(--s2);border:1px solid var(--border);border-radius:9px;margin-bottom:.35rem;font-size:.75rem;cursor:pointer;transition:all .2s;}
.rstep:hover{border-color:var(--border2);}
.rstep.dr{opacity:.45;text-decoration:line-through;color:var(--t3);}
.rn{font-family:'DM Mono',monospace;font-size:.6rem;color:var(--v3);width:16px;flex-shrink:0;}
.rt{font-family:'DM Mono',monospace;font-size:.58rem;color:var(--t3);margin-left:auto;}

/* ‚îÄ‚îÄ ACTIONS ‚îÄ‚îÄ */
.act-row{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1rem;opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .6s forwards;}
.acard{padding:1.35rem 1.1rem;border-radius:18px;border:1px solid var(--border);background:var(--s1);cursor:pointer;text-align:center;transition:all .3s cubic-bezier(.16,1,.3,1);position:relative;overflow:hidden;}
.acard::before{content:'';position:absolute;inset:0;opacity:0;transition:opacity .3s;border-radius:18px;}
.acard.a1::before{background:linear-gradient(135deg,rgba(217,70,239,.14),rgba(124,58,237,.07));}
.acard.a2::before{background:linear-gradient(135deg,rgba(244,63,94,.11),rgba(245,158,11,.055));}
.acard.a3::before{background:linear-gradient(135deg,rgba(6,182,212,.09),rgba(79,70,229,.07));}
.acard.a4::before{background:linear-gradient(135deg,rgba(245,158,11,.09),rgba(244,63,94,.055));}
.acard:hover::before{opacity:1;}
.acard:hover{transform:translateY(-3px);border-color:var(--border2);box-shadow:0 18px 50px rgba(0,0,0,.4);}
.aico{font-size:1.9rem;display:block;margin-bottom:.65rem;}
.anm{font-family:'Syne',sans-serif;font-size:.8rem;font-weight:700;margin-bottom:.22rem;}
.ads{font-size:.66rem;color:var(--t2);line-height:1.35;}
.abadge{display:inline-block;margin-top:.38rem;font-family:'DM Mono',monospace;font-size:.53rem;padding:.12rem .45rem;border-radius:4px;background:rgba(124,58,237,.1);color:var(--v3);border:1px solid rgba(124,58,237,.2);}

/* ‚îÄ‚îÄ SPRINT OVERLAY ‚îÄ‚îÄ */
.sprint-ov{display:none;position:fixed;inset:0;background:rgba(4,4,10,.94);backdrop-filter:blur(14px);z-index:9000;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;}
.sprint-ov.open{display:flex;}
.sc-btn{position:absolute;top:1.8rem;right:1.8rem;background:none;border:none;color:var(--t3);font-size:1.4rem;cursor:pointer;transition:color .2s;}
.sc-btn:hover{color:var(--text);}
.sprint-lbl{font-family:'DM Mono',monospace;font-size:.75rem;letter-spacing:.2em;text-transform:uppercase;color:var(--t3);}
.sprint-time{font-family:'Syne',sans-serif;font-size:clamp(4rem,11vw,7.5rem);font-weight:800;letter-spacing:-.05em;background:linear-gradient(135deg,#fff,var(--v3),var(--fuch));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.sprint-sizes{display:flex;gap:.45rem;}
.ss-btn{padding:.38rem .95rem;border-radius:100px;border:1px solid var(--border);background:transparent;color:var(--t2);font-family:'DM Mono',monospace;font-size:.7rem;cursor:pointer;transition:all .2s;}
.ss-btn:hover,.ss-btn.active{border-color:var(--v);color:var(--v3);background:rgba(124,58,237,.09);}
.sprint-ctas{display:flex;gap:.65rem;}
.sbtn{padding:.7rem 1.65rem;border-radius:100px;border:none;font-family:'DM Sans',sans-serif;font-size:.88rem;font-weight:600;cursor:pointer;transition:all .2s;}
.sbtn.go{background:linear-gradient(135deg,var(--v),var(--fuch));color:#fff;box-shadow:0 0 28px rgba(124,58,237,.5);}
.sbtn.stop{background:var(--s2);border:1px solid var(--border);color:var(--t2);}

/* ‚îÄ‚îÄ NOTION DB SECTION ‚îÄ‚îÄ */
.db-sec{margin-bottom:1rem;opacity:0;animation:rise .9s ease .62s forwards;}
.db-card{background:var(--s1);border:1px solid var(--border);border-radius:20px;padding:1.55rem;}
.db-tabs{display:flex;gap:.5rem;margin-bottom:1.2rem;flex-wrap:wrap;}
.db-tab{font-family:'DM Mono',monospace;font-size:.6rem;padding:.3rem .8rem;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--t3);cursor:pointer;transition:all .2s;letter-spacing:.06em;text-transform:uppercase;}
.db-tab:hover{border-color:var(--border2);color:var(--t2);}
.db-tab.active{background:rgba(124,58,237,.12);border-color:rgba(124,58,237,.3);color:var(--v3);}
/* schema table */
.schema-tbl{width:100%;border-collapse:collapse;font-size:.78rem;margin-bottom:.75rem;}
.schema-tbl th{text-align:left;padding:.6rem .9rem;border-bottom:2px solid var(--border);font-size:.62rem;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--t3);background:var(--s2);}
.schema-tbl td{padding:.62rem .9rem;border-bottom:1px solid var(--border);color:var(--t2);}
.schema-tbl td:first-child{font-family:'DM Mono',monospace;color:var(--text);font-size:.72rem;}
.schema-tbl tr:last-child td{border-bottom:none;}
.schema-tbl tr:hover td{background:rgba(255,255,255,.025);}
/* formula block */
.fblock{background:#080814;border:1px solid rgba(124,58,237,.2);border-radius:12px;padding:1.1rem 1.25rem;margin:.65rem 0;overflow-x:auto;position:relative;}
.fblock::before{content:'formula';position:absolute;top:.55rem;right:.9rem;font-family:'DM Mono',monospace;font-size:.55rem;color:var(--v3);letter-spacing:.1em;text-transform:uppercase;}
.fblock code{font-family:'DM Mono',monospace;font-size:.72rem;color:#e2e1de;line-height:1.9;display:block;white-space:pre;}
.fc{color:#6b6965;}.ff{color:#7c9fc9;}.fs{color:#88b369;}.fn{color:#c9a96e;}.fk{color:#c487d4;}

/* ‚îÄ‚îÄ NEUROSCIENCE ‚îÄ‚îÄ */
.neuro-sec{margin-bottom:1rem;opacity:0;animation:rise .9s ease .62s forwards;}
.neuro-inner{background:linear-gradient(135deg,rgba(6,182,212,.045),rgba(79,70,229,.035));border:1px solid rgba(6,182,212,.11);border-radius:20px;padding:1.65rem;position:relative;overflow:hidden;}
.neuro-inner::before{content:'';position:absolute;top:-28%;right:-4%;width:320px;height:320px;border-radius:50%;background:radial-gradient(circle,rgba(6,182,212,.055),transparent 70%);pointer-events:none;}
.neuro-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.95rem;}
.ni{text-align:center;padding:1.1rem .82rem;background:rgba(255,255,255,.018);border:1px solid var(--border);border-radius:14px;transition:all .22s;}
.ni:hover{background:rgba(255,255,255,.035);border-color:var(--border2);transform:translateY(-2px);}
.ni-ico{font-size:1.65rem;display:block;margin-bottom:.55rem;}
.ni-nm{font-family:'Syne',sans-serif;font-size:.77rem;font-weight:700;margin-bottom:.35rem;}
.ni-ds{font-size:.66rem;color:var(--t2);line-height:1.5;}

/* ‚îÄ‚îÄ MANIFESTO ‚îÄ‚îÄ */
.man-sec{opacity:0;animation:rise .9s cubic-bezier(.16,1,.3,1) .68s forwards;margin-bottom:1rem;}
.man-card{background:linear-gradient(135deg,rgba(79,70,229,.055),rgba(124,58,237,.035),rgba(217,70,239,.025));border:1px solid rgba(124,58,237,.11);border-radius:22px;padding:2.4rem;display:grid;grid-template-columns:1fr auto;gap:2.5rem;align-items:center;position:relative;overflow:hidden;}
.man-card::before{content:'';position:absolute;top:-55%;right:-4%;width:450px;height:450px;border-radius:50%;background:radial-gradient(circle,rgba(217,70,239,.055),transparent 70%);pointer-events:none;}
.man-q{font-family:'Syne',sans-serif;font-size:1.45rem;font-weight:800;line-height:1.3;letter-spacing:-.02em;position:relative;z-index:1;}
.man-q span{background:linear-gradient(135deg,#a5b4fc,#e879f9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.man-s{font-size:.85rem;color:var(--t2);margin-top:.55rem;line-height:1.7;position:relative;z-index:1;}
.chips{display:flex;flex-direction:column;gap:.45rem;min-width:200px;position:relative;z-index:1;}
.chip{padding:.45rem .9rem;border-radius:100px;font-size:.7rem;font-weight:500;display:flex;align-items:center;gap:.45rem;white-space:nowrap;}
.ch1{background:rgba(79,70,229,.11);color:#a5b4fc;border:1px solid rgba(79,70,229,.17);}
.ch2{background:rgba(16,185,129,.09);color:var(--em);border:1px solid rgba(16,185,129,.17);}
.ch3{background:rgba(245,158,11,.09);color:var(--amb);border:1px solid rgba(245,158,11,.17);}
.ch4{background:rgba(217,70,239,.09);color:#e879f9;border:1px solid rgba(217,70,239,.17);}

/* ‚îÄ‚îÄ CALLOUT (Notion-native) ‚îÄ‚îÄ */
.callout{display:flex;gap:.9rem;padding:1rem 1.1rem;border-radius:11px;background:var(--s2);border:1px solid var(--border);margin-bottom:.85rem;}
.callout.c-green{background:rgba(16,185,129,.06);border-color:rgba(16,185,129,.18);}
.callout.c-rose{background:rgba(244,63,94,.06);border-color:rgba(244,63,94,.18);}
.callout.c-amb{background:rgba(245,158,11,.06);border-color:rgba(245,158,11,.18);}
.callout.c-v{background:rgba(124,58,237,.06);border-color:rgba(124,58,237,.18);}
.callout.c-sky{background:rgba(6,182,212,.06);border-color:rgba(6,182,212,.18);}
.ci{font-size:.95rem;flex-shrink:0;margin-top:1px;}
.cb{flex:1;}
.cbtitle{font-size:.82rem;font-weight:600;margin-bottom:.2rem;}
.cbt{font-size:.76rem;color:var(--t2);line-height:1.6;}

/* TOAST */
.toast{position:fixed;bottom:1.8rem;right:1.8rem;background:var(--s2);border:1px solid rgba(16,185,129,.24);border-radius:14px;padding:.9rem 1.1rem;display:flex;align-items:center;gap:.7rem;font-size:.84rem;font-weight:500;color:var(--em);box-shadow:0 18px 55px rgba(0,0,0,.6),0 0 0 1px rgba(16,185,129,.09);transform:translateY(110px) scale(.9);opacity:0;transition:all .45s cubic-bezier(.34,1.56,.64,1);z-index:9990;max-width:300px;}
.toast.show{transform:translateY(0) scale(1);opacity:1;}

@media(max-width:1100px){.main-grid{grid-template-columns:1fr;}.right-col{display:grid;grid-template-columns:1fr 1fr;}.neuro-grid{grid-template-columns:repeat(2,1fr);}.mom-inner{grid-template-columns:1fr;}.ring-wrap{margin:0 auto;}}
@media(max-width:820px){.bot-grid{grid-template-columns:1fr 1fr;}.act-row{grid-template-columns:repeat(2,1fr);}.man-card{grid-template-columns:1fr;}.chips{flex-direction:row;flex-wrap:wrap;}.energy-row{grid-template-columns:1fr;}.setup-steps{grid-template-columns:repeat(3,1fr);}}
@media(max-width:540px){.app{padding:0 1rem 3.5rem;}.act-row{grid-template-columns:repeat(2,1fr);}.right-col{grid-template-columns:1fr;}.bot-grid{grid-template-columns:1fr;}.setup-steps{grid-template-columns:repeat(2,1fr);}.neuro-grid{grid-template-columns:1fr 1fr;}}
</style>
</head>
<body>
<div class="cur" id="cur"></div>
<div class="cur-r" id="cur-r"></div>
<div class="o1 orb"></div><div class="o2 orb"></div><div class="o3 orb"></div><div class="o4 orb"></div>
<div class="grid-bg"></div>
<div class="confetti-wrap" id="cf"></div>

<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4f46e5"/>
      <stop offset="50%" style="stop-color:#7c3aed"/>
      <stop offset="100%" style="stop-color:#d946ef"/>
    </linearGradient>
  </defs>
</svg>

<!-- SPRINT OVERLAY -->
<div class="sprint-ov" id="sprintOv">
  <button class="sc-btn" onclick="closeSprint()">‚úï</button>
  <div class="sprint-lbl">Focus Sprint</div>
  <div class="sprint-time" id="sprintDisp">25:00</div>
  <div class="sprint-sizes">
    <div class="ss-btn active" onclick="setSD(25,this)">25 min</div>
    <div class="ss-btn" onclick="setSD(50,this)">50 min</div>
    <div class="ss-btn" onclick="setSD(90,this)">90 min</div>
  </div>
  <div class="sprint-ctas">
    <button class="sbtn go" id="sprintBtn" onclick="toggleSprint()">‚ñ∂ Start Sprint</button>
    <button class="sbtn stop" onclick="closeSprint()">Cancel</button>
  </div>
  <div style="font-family:'DM Mono',monospace;font-size:.64rem;color:var(--t3)">+10 pts on completion</div>
</div>

<div class="app">

  <!-- HEADER -->
  <header class="header">
    <div>
      <div class="logo-pill"><span class="live-dot"></span>ADHD Operating System ¬∑ v2.0</div>
      <div class="logo-name">FlowState OS</div>
      <div class="logo-sub">Built for your brain. Not against it. <span class="ver-tag">ELITE</span></div>
    </div>
    <div class="header-r">
      <div class="hdate" id="hdate"></div>
      <div class="pill pill-streak">üî• <span id="streakN">7</span> Day Streak</div>
      <div class="pill pill-pts">‚ö° <span id="ptsH">127</span> pts this week</div>
      <div class="pill pill-elite">üíé Elite Performer</div>
    </div>
  </header>

  <!-- SETUP -->
  <div class="setup-sec" id="setupSec">
    <div class="setup-card">
      <div class="setup-head">
        <div>
          <div class="setup-title">üöÄ Start Here ‚Äî 2 Minute Setup</div>
          <div class="setup-meta">// Complete all 5 steps to activate your system</div>
        </div>
        <div class="setup-pct" id="setupPct">0%</div>
      </div>
      <div class="setup-steps">
        <div class="sstep" id="s1" onclick="completeStep(1)"><div class="ss-num">STEP 01</div><span class="ss-ico">‚ö°</span><div class="ss-nm">Pick Energy Mode</div><div class="ss-ds">How's your brain right now?</div></div>
        <div class="sstep" id="s2" onclick="completeStep(2)"><div class="ss-num">STEP 02</div><span class="ss-ico">üòå</span><div class="ss-nm">Log Your Mood</div><div class="ss-ds">30 seconds. No judgment.</div></div>
        <div class="sstep" id="s3" onclick="completeStep(3)"><div class="ss-num">STEP 03</div><span class="ss-ico">üéØ</span><div class="ss-nm">Set Top 3 Tasks</div><div class="ss-ds">Only 3. That's the rule.</div></div>
        <div class="sstep" id="s4" onclick="completeStep(4)"><div class="ss-num">STEP 04</div><span class="ss-ico">üß†</span><div class="ss-nm">Brain Dump</div><div class="ss-ds">Clear the mental cache.</div></div>
        <div class="sstep active-s" id="s5" onclick="completeStep(5)"><div class="ss-num">STEP 05</div><span class="ss-ico">üî•</span><div class="ss-nm">Start First Sprint</div><div class="ss-ds">Earn your first 10 pts!</div></div>
      </div>
      <div class="setup-bar"><div class="setup-fill" id="setupFill"></div></div>
    </div>
  </div>

  <!-- ENERGY -->
  <div class="energy-sec">
    <div class="slabel">// Smart Task Engine ‚Äî Energy Mode</div>
    <div class="energy-row">
      <div class="en-card low" onclick="setEnergy(this,'üîã Low Energy')"><div class="en-dot"></div><span class="en-emoji">üîã</span><div class="en-title">Low Energy</div><div class="en-desc">Gentle tasks only. Quick wins. Protect yourself today.</div><div class="en-hint">‚Üí Shows: 5 min tasks only</div></div>
      <div class="en-card med active" onclick="setEnergy(this,'‚ö° Medium Energy')"><div class="en-dot"></div><span class="en-emoji">‚ö°</span><div class="en-title">Medium Energy</div><div class="en-desc">Standard operations. Mix of tasks. Steady progress.</div><div class="en-hint">‚Üí Shows: 15‚Äì30 min tasks</div></div>
      <div class="en-card hi" onclick="setEnergy(this,'üöÄ Hyperfocus Active')"><div class="en-dot"></div><span class="en-emoji">üöÄ</span><div class="en-title">Hyperfocus Mode</div><div class="en-desc">Build something great. Full cognitive power online.</div><div class="en-hint">‚Üí Shows: Deep work tasks</div></div>
    </div>
  </div>

  <!-- MOMENTUM -->
  <div class="mom-sec">
    <div class="slabel">// Momentum Core ‚Äî Weekly Engine</div>
    <div class="mom-card">
      <div class="mom-inner">
        <div class="ring-wrap">
          <svg class="ring-svg" viewBox="0 0 100 100"><circle class="ring-bg" cx="50" cy="50" r="45"/><circle class="ring-fill" cx="50" cy="50" r="45" id="ringC"/></svg>
          <div class="ring-lbl"><div class="ring-pct" id="ringPct">65%</div><div class="ring-sub">WEEKLY</div></div>
        </div>
        <div class="mom-mid">
          <div class="mom-ttl">Weekly Momentum Meter</div>
          <div>
            <div class="mom-bar-track"><div class="mom-bar-fill" id="momBar" style="width:68%;"></div></div>
            <div class="mom-bar-labels"><span>0</span><span>Building</span><span>Stable</span><span>Elite</span></div>
          </div>
          <div class="mom-compare"><span class="up">‚Üë 23% ahead of last week</span><span style="color:var(--t3);font-size:.7rem"> ¬∑ 14 tasks vs 11</span></div>
          <div class="elite-pill">üíé Elite Performer ¬∑ Day 7 Streak</div>
        </div>
        <div>
          <div class="mom-stats">
            <div class="ms"><span class="ms-n" style="color:var(--em)" id="mDone">14</span><span class="ms-l">Done</span></div>
            <div class="ms"><span class="ms-n" style="color:var(--amb)" id="mPts">127</span><span class="ms-l">Points</span></div>
            <div class="ms"><span class="ms-n" style="color:var(--v3)" id="mSprints">8</span><span class="ms-l">Sprints</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN GRID -->
  <div class="main-grid">
    <!-- TASKS -->
    <div class="card tasks-card">
      <div class="card-hd"><div class="hdi hdi-v">üéØ</div>Smart Task Engine ‚Äî Today's Top 3<span class="cbadge">Energy Matched</span></div>

      <div class="task crit" onclick="toggleTask(this,15)">
        <div class="tcb">‚úì</div>
        <div class="tbody"><div class="tname">Set up FlowState OS completely</div><div class="ttags"><span class="tag tc">Critical</span><span class="tag tn">‚ö° 15 min</span><span class="tag tn">Admin</span></div></div>
        <div class="tpts">+15 pts</div>
        <div class="tex" onclick="toggleSub(event,this)">‚ñ∏ 3 steps</div>
      </div>
      <div class="sub-drawer">
        <div class="sub-item" onclick="this.classList.toggle('sd')"><div class="scb">‚úì</div><span>Duplicate template to workspace</span></div>
        <div class="sub-item" onclick="this.classList.toggle('sd')"><div class="scb"></div><span>Set energy mode for today</span></div>
        <div class="sub-item" onclick="this.classList.toggle('sd')"><div class="scb"></div><span>Add first 3 real tasks</span></div>
      </div>

      <div class="task high" onclick="toggleTask(this,3)">
        <div class="tcb"></div>
        <div class="tbody"><div class="tname">Log mood & energy in tracker</div><div class="ttags"><span class="tag th">High</span><span class="tag tn">‚ö° &lt;5 min</span><span class="tag tn">Health</span></div></div>
        <div class="tpts">+3 pts</div>
      </div>

      <div class="task med" onclick="toggleTask(this,8)">
        <div class="tcb"></div>
        <div class="tbody"><div class="tname">Try first 25-min Hyperfocus session</div><div class="ttags"><span class="tag tm">Medium</span><span class="tag tn">üïê 30 min</span><span class="tag tn">Work</span></div></div>
        <div class="tpts">+8 pts</div>
      </div>

      <button class="add-btn" onclick="toast('‚úÖ Smart Task Engine opened ‚Äî add tasks with auto-energy matching')">+ Add Task</button>

      <div class="divline"></div>
      <div class="overdue-hd">‚ö†Ô∏è Overdue ‚Äî Needs Recovery</div>
      <div class="callout c-rose">
        <span class="ci">‚ö†Ô∏è</span>
        <div class="cb">
          <div class="cbtitle">Weekly review ‚Äî from last week</div>
          <div class="cbt">2 days overdue ¬∑ +10 rescue points when done ¬∑ <span onclick="recoverOverdue()" style="color:var(--rose);cursor:pointer;text-decoration:underline;">Mark done ‚Üí</span></div>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="right-col">
      <!-- DOPAMINE ECONOMY -->
      <div class="card pts-card">
        <div class="card-hd"><div class="hdi hdi-a">‚ö°</div>Dopamine Economy</div>
        <div class="pts-main">
          <div class="pts-num" id="bigPts">127</div>
          <div class="pts-sub">Points This Week</div>
          <div class="pts-earned" id="ptsEarned"></div>
        </div>
        <div class="bar-wrap"><div class="bar-fill" id="tierBar" style="width:52%;"></div></div>
        <div class="bar-lbl"><span id="tierCur">ü•à Silver ‚úì</span><span id="tierNxt">ü•á Gold at 150</span></div>
        <div class="tiers">
          <div class="tier t-br" id="tb"><span class="tem">ü•â</span>Bronze<span class="tpt">25</span></div>
          <div class="tier t-si active-t" id="ts"><span class="tem">ü•à</span>Silver<span class="tpt">75</span></div>
          <div class="tier t-go" id="tg"><span class="tem">ü•á</span>Gold<span class="tpt">150</span></div>
          <div class="tier t-pl" id="tp"><span class="tem">üíé</span>Plat<span class="tpt">300</span></div>
        </div>
        <div class="reward-box" id="rewardBox" onclick="claimReward()">üéÅ <strong>Silver reward ready:</strong> You've unlocked your treat. Tap to claim it.</div>
      </div>

      <!-- EMOTIONAL INTELLIGENCE -->
      <div class="card mood-card">
        <div class="card-hd"><div class="hdi hdi-e">üòå</div>Emotional Intelligence</div>
        <div class="mood-row">
          <div class="mb" onclick="setMood(this,'üò© Terrible',0)">üò©</div>
          <div class="mb" onclick="setMood(this,'üòï Low',1)">üòï</div>
          <div class="mb sel" onclick="setMood(this,'üòê Neutral',2)">üòê</div>
          <div class="mb" onclick="setMood(this,'üôÇ Good',3)">üôÇ</div>
          <div class="mb" onclick="setMood(this,'üòÑ Great',4)">üòÑ</div>
        </div>
        <div class="mood-lbl" id="moodLbl">üòê Neutral ‚Äî Logged to tracker</div>
        <div class="burnout" id="burnout">‚ö†Ô∏è <strong>Burnout Pattern:</strong> 3 low-mood days detected. Cut your task list by 50% and activate Reset Mode. Rest is not failure.</div>
      </div>
    </div>
  </div>

  <!-- QUICK ACTIONS -->
  <div class="act-row">
    <div class="acard a1" onclick="openSprint()"><span class="aico">üî•</span><div class="anm">Focus Sprint</div><div class="ads">25 / 50 / 90 min deep work</div><div class="abadge">+10 pts per sprint</div></div>
    <div class="acard a2" onclick="openReset()"><span class="aico">üÜò</span><div class="anm">Reset My Day</div><div class="ads">90-sec executive dysfunction reboot</div><div class="abadge">Phase 3 Protocol</div></div>
    <div class="acard a3" onclick="document.getElementById('dumpTa').focus()"><span class="aico">üß†</span><div class="anm">Brain Dump</div><div class="ads">Clear mental cache. Zero filter mode.</div><div class="abadge">Auto-converts to tasks</div></div>
    <div class="acard a4" onclick="claimReward()"><span class="aico">üèÜ</span><div class="anm">Reward Vault</div><div class="ads" id="vaultDs">Silver tier unlocked. Claim it.</div><div class="abadge">Dopamine Economy</div></div>
  </div>

  <!-- BOTTOM GRID -->
  <div class="bot-grid">
    <!-- BRAIN DUMP -->
    <div class="card dump-card">
      <div class="card-hd"><div class="hdi" style="background:rgba(6,182,212,.1)">üß†</div>Brain Dump ‚Üí Task Converter</div>
      <textarea class="dump-ta" id="dumpTa" placeholder="Everything in your head right now...&#10;&#10;No filter. No judgment. Just clear the cache. Each line can become a task."></textarea>
      <div class="dump-foot">
        <span class="dump-hint" id="dumpCt">0 thoughts captured</span>
        <button class="dump-btn" onclick="convertDump()">Convert to Tasks ‚Üí</button>
      </div>
      <div class="dump-tip" id="dumpTip">üí° Each line becomes a task. Add "!" for High priority.</div>
    </div>

    <!-- STREAK -->
    <div class="card streak-card">
      <div class="card-hd"><div class="hdi hdi-e">üî•</div>Momentum Core ‚Äî Streak</div>
      <div class="week-grid">
        <div class="sday done-d">Mo</div><div class="sday done-d">Tu</div><div class="sday done-d">We</div>
        <div class="sday done-d">Th</div><div class="sday done-d">Fr</div><div class="sday done-d">Sa</div>
        <div class="sday today-d">Su</div>
      </div>
      <div class="streak-big">7</div>
      <div class="streak-lbl">Days in a Row ‚Äî Building Momentum üî•</div>
      <div class="streak-next">Next milestone: <strong style="color:var(--amb)">14 days ‚Üí +25 bonus pts</strong><br><span style="color:var(--t3);font-size:.64rem">Missing a day resets to "üå± Fresh Start" ‚Äî not failure.</span></div>
    </div>

    <!-- RESET MODE -->
    <div class="card reset-card" id="resetCard">
      <div class="card-hd"><div class="hdi" style="background:rgba(244,63,94,.1)">üÜò</div>Reset My Day ‚Äî Phase 3</div>
      <div class="callout c-sky" style="padding:.7rem .9rem;margin-bottom:.7rem;">
        <span class="ci">üíô</span>
        <div class="cb"><div class="cbt">Brain stuck? Day derailed? This 90-second protocol reboots your executive function. You're not broken ‚Äî your context is.</div></div>
      </div>
      <div class="reset-btns">
        <div class="rbtn rp" onclick="openReset()">üîÑ Start 90-sec Reset</div>
        <div class="rbtn" onclick="toast('‚ö° Showing only tasks under 5 minutes...')">‚ö° Micro Tasks</div>
        <div class="rbtn" onclick="toast('üÖøÔ∏è Parking Lot opened ‚Äî dump distractions here')">üÖøÔ∏è Parking Lot</div>
        <div class="rbtn" onclick="toast('üìä Week reviewed. 3 wins identified.')">üìä Week Review</div>
      </div>
      <div class="ritual" id="ritual">
        <div style="font-family:'DM Mono',monospace;font-size:.58rem;color:var(--t3);letter-spacing:.1em;text-transform:uppercase;margin-bottom:.55rem;">// 90-Second Reset Protocol</div>
        <div class="rstep" onclick="doneR(this)"><span class="rn">01</span>Close all tabs except this one<span class="rt">10s</span></div>
        <div class="rstep" onclick="doneR(this)"><span class="rn">02</span>Take 3 slow deep breaths<span class="rt">30s</span></div>
        <div class="rstep" onclick="doneR(this)"><span class="rn">03</span>Write ONE thing you can do in 2 min<span class="rt">20s</span></div>
        <div class="rstep" onclick="doneR(this)"><span class="rn">04</span>Do ONLY that one thing<span class="rt">2 min</span></div>
        <div class="rstep" onclick="doneR(this)"><span class="rn">05</span>Log it. Claim your points. Keep going.<span class="rt">10s</span></div>
      </div>
    </div>
  </div>

  <!-- NOTION-NATIVE: DATABASE SCHEMA & FORMULAS (collapsible) -->
  <div class="db-sec">
    <div class="slabel">// Notion Database Architecture ‚Äî Build Guide</div>
    <div class="db-card">
      <div class="db-tabs">
        <div class="db-tab active" onclick="showTab('tasks-schema',this)">Tasks DB</div>
        <div class="db-tab" onclick="showTab('daily-schema',this)">Daily Log</div>
        <div class="db-tab" onclick="showTab('weekly-schema',this)">Weekly Summary</div>
        <div class="db-tab" onclick="showTab('formulas-tab',this)">Formulas</div>
        <div class="db-tab" onclick="showTab('hierarchy-tab',this)">Page Hierarchy</div>
      </div>

      <!-- TASKS SCHEMA -->
      <div id="tasks-schema" class="tab-pane" style="display:block;">
        <div class="callout c-v" style="margin-bottom:1rem;">
          <span class="ci">üéØ</span>
          <div class="cb"><div class="cbtitle">Tasks Database</div><div class="cbt">Core database. All tasks live here. Link to Daily Log and Weekly Summary via Relations. Filter by Energy Level for smart views.</div></div>
        </div>
        <table class="schema-tbl">
          <thead><tr><th>Property Name</th><th>Type</th><th>Options / Notes</th></tr></thead>
          <tbody>
            <tr><td>Name</td><td>Title</td><td>Task name</td></tr>
            <tr><td>Priority</td><td>Select</td><td>üî¥ Critical ¬∑ üü† High ¬∑ üü° Medium ¬∑ üü¢ Low</td></tr>
            <tr><td>Energy Level</td><td>Select</td><td>Any ¬∑ Low (‚â§5 min) ¬∑ Medium (15-30 min) ¬∑ High (deep work)</td></tr>
            <tr><td>Status</td><td>Select</td><td>Not Started ¬∑ In Progress ¬∑ ‚úÖ Done ¬∑ üì¶ Archived</td></tr>
            <tr><td>Points</td><td>Number</td><td>Manual: 3=quick, 8=medium, 15=hard, 25=epic</td></tr>
            <tr><td>Time Estimate</td><td>Select</td><td>5 min ¬∑ 15 min ¬∑ 30 min ¬∑ 60 min ¬∑ 90 min</td></tr>
            <tr><td>Due Date</td><td>Date</td><td>Optional. Used for overdue detection.</td></tr>
            <tr><td>Completed On</td><td>Date</td><td>Set this when marking Status ‚Üí Done</td></tr>
            <tr><td>Week</td><td>Formula</td><td>See Formulas tab</td></tr>
            <tr><td>Is Overdue</td><td>Formula</td><td>See Formulas tab</td></tr>
            <tr><td>Daily Log</td><td>Relation</td><td>‚Üí Daily Log database (Many-to-one)</td></tr>
            <tr><td>Category</td><td>Multi-select</td><td>Work ¬∑ Health ¬∑ Admin ¬∑ Learning ¬∑ Personal</td></tr>
          </tbody>
        </table>
        <div class="callout c-amb">
          <span class="ci">üí°</span>
          <div class="cb"><div class="cbt">Create 3 filtered views: "Today's Top 3" (filter: Status=Not Started, sort by Priority), "Low Energy Mode" (filter: Energy Level=Low), "Overdue" (filter: Is Overdue=Yes).</div></div>
        </div>
      </div>

      <!-- DAILY LOG SCHEMA -->
      <div id="daily-schema" class="tab-pane" style="display:none;">
        <div class="callout c-green" style="margin-bottom:1rem;">
          <span class="ci">üìÖ</span>
          <div class="cb"><div class="cbtitle">Daily Log Database</div><div class="cbt">One row per day. Links mood, energy, task completion, and sprint count. Powers the emotional intelligence layer and burnout detection.</div></div>
        </div>
        <table class="schema-tbl">
          <thead><tr><th>Property Name</th><th>Type</th><th>Options / Notes</th></tr></thead>
          <tbody>
            <tr><td>Date</td><td>Date (Title)</td><td>One entry per day. Format: YYYY-MM-DD</td></tr>
            <tr><td>Mood Score</td><td>Number</td><td>0=üò© 1=üòï 2=üòê 3=üôÇ 4=üòÑ</td></tr>
            <tr><td>Mood Label</td><td>Select</td><td>Terrible ¬∑ Low ¬∑ Neutral ¬∑ Good ¬∑ Great</td></tr>
            <tr><td>Energy Mode</td><td>Select</td><td>Low ¬∑ Medium ¬∑ High (set at start of day)</td></tr>
            <tr><td>Tasks Done</td><td>Rollup</td><td>Count from Tasks where Completed On = today</td></tr>
            <tr><td>Points Today</td><td>Rollup</td><td>Sum of Points from Tasks where Completed On = today</td></tr>
            <tr><td>Sprint Count</td><td>Number</td><td>Increment manually after each sprint (+1 per sprint)</td></tr>
            <tr><td>Notes / Brain Dump</td><td>Text</td><td>Free-form. Paste brain dump here for record.</td></tr>
            <tr><td>Is Low Mood</td><td>Formula</td><td>prop("Mood Score") &lt;= 1</td></tr>
            <tr><td>Week</td><td>Formula</td><td>formatDate(prop("Date"), "YYYY-[W]WW")</td></tr>
            <tr><td>Weekly Summary</td><td>Relation</td><td>‚Üí Weekly Summary database</td></tr>
          </tbody>
        </table>
      </div>

      <!-- WEEKLY SCHEMA -->
      <div id="weekly-schema" class="tab-pane" style="display:none;">
        <div class="callout c-v" style="margin-bottom:1rem;">
          <span class="ci">üìà</span>
          <div class="cb"><div class="cbtitle">Weekly Summary Database</div><div class="cbt">Aggregates all week data. This is where Momentum Score, Tier, System Health, and Burnout Detection live. One row per week, auto-populated via rollups.</div></div>
        </div>
        <table class="schema-tbl">
          <thead><tr><th>Property Name</th><th>Type</th><th>Notes</th></tr></thead>
          <tbody>
            <tr><td>Week</td><td>Title</td><td>e.g. "2025-W24" ‚Äî matches Daily Log Week formula</td></tr>
            <tr><td>Total Tasks</td><td>Rollup</td><td>Count of related Tasks where Status=Done</td></tr>
            <tr><td>Total Points</td><td>Rollup</td><td>Sum of Points from related Tasks (Done only)</td></tr>
            <tr><td>Sprint Count</td><td>Rollup</td><td>Sum of Sprint Count from related Daily Logs</td></tr>
            <tr><td>Avg Mood</td><td>Rollup</td><td>Average of Mood Score from related Daily Logs</td></tr>
            <tr><td>Low Mood Days</td><td>Rollup</td><td>Count of Daily Logs where Is Low Mood = true</td></tr>
            <tr><td>Momentum Score</td><td>Formula</td><td>See Formulas tab ‚Äî 0 to 100</td></tr>
            <tr><td>System Health</td><td>Formula</td><td>Elite / Stable / Building / Recovery</td></tr>
            <tr><td>Tier</td><td>Formula</td><td>Bronze / Silver / Gold / Platinum</td></tr>
            <tr><td>Burnout Risk</td><td>Formula</td><td>Flags if Low Mood Days ‚â• 3</td></tr>
            <tr><td>Reward Unlock</td><td>Formula</td><td>Triggers reward message at tier milestones</td></tr>
            <tr><td>Recovery Mode</td><td>Formula</td><td>Activates when Momentum Score &lt; 25</td></tr>
            <tr><td>Reward Claimed</td><td>Checkbox</td><td>User checks this after claiming reward</td></tr>
          </tbody>
        </table>
      </div>

      <!-- FORMULAS -->
      <div id="formulas-tab" class="tab-pane" style="display:none;">
        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Momentum Score (0‚Äì100)</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí Momentum Score (Number formula)</span>
<span class="fc">// Factors: tasks (35%) ¬∑ points (35%) ¬∑ sprints (20%) ¬∑ mood (10%)</span>

<span class="fk">let</span> t = <span class="ff">min</span>(prop(<span class="fs">"Total Tasks"</span>) / <span class="fn">15</span>, <span class="fn">1</span>) * <span class="fn">35</span>
<span class="fk">let</span> p = <span class="ff">min</span>(prop(<span class="fs">"Total Points"</span>) / <span class="fn">150</span>, <span class="fn">1</span>) * <span class="fn">35</span>
<span class="fk">let</span> s = <span class="ff">min</span>(prop(<span class="fs">"Sprint Count"</span>) / <span class="fn">10</span>, <span class="fn">1</span>) * <span class="fn">20</span>
<span class="fk">let</span> m = (prop(<span class="fs">"Avg Mood"</span>) / <span class="fn">4</span>) * <span class="fn">10</span>

<span class="ff">round</span>(t + p + s + m)</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">System Health Status</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí System Health (Text formula)</span>

<span class="fk">if</span>(prop(<span class="fs">"Momentum Score"</span>) >= <span class="fn">75</span>, <span class="fs">"‚úÖ Elite"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Momentum Score"</span>) >= <span class="fn">50</span>, <span class="fs">"‚ö° Stable"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Momentum Score"</span>) >= <span class="fn">25</span>, <span class="fs">"üî® Building"</span>,
<span class="fs">"üå± Recovery Mode"</span>)))</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Tier Formula (Bronze ‚Üí Platinum)</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí Tier (Text formula)</span>

<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">300</span>, <span class="fs">"üíé Platinum"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">150</span>, <span class="fs">"ü•á Gold"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">75</span>,  <span class="fs">"ü•à Silver"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">25</span>,  <span class="fs">"ü•â Bronze"</span>,
<span class="fs">"üå± Starting"</span>))))</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Burnout Detection</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí Burnout Risk (Text formula)</span>
<span class="fc">// Requires "Low Mood Days" rollup (count where Is Low Mood = true)</span>

<span class="fk">if</span>(prop(<span class="fs">"Low Mood Days"</span>) >= <span class="fn">3</span>,
  <span class="fs">"‚ö†Ô∏è Burnout Risk ‚Äî reduce tasks 50%, activate Reset Mode"</span>,
  <span class="fs">"‚úÖ Healthy"</span>)</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Recovery Mode Flag</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí Recovery Mode (Checkbox formula)</span>

prop(<span class="fs">"Momentum Score"</span>) < <span class="fn">25</span></code></div>
            <div class="callout c-rose" style="margin-top:.65rem;">
              <span class="ci">üí°</span>
              <div class="cb"><div class="cbt">When Recovery Mode = true, add a Notion automation: send yourself a reminder notification + create a pre-filled Reset My Day task in your Tasks DB automatically.</div></div>
            </div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Reward Unlock Logic</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Weekly Summary ‚Üí Reward Unlock (Text formula)</span>
<span class="fc">// Pair with "Reward Claimed" checkbox to prevent double-claiming</span>

<span class="fk">if</span>(prop(<span class="fs">"Reward Claimed"</span>) == <span class="fk">true</span>,
  <span class="fs">"‚úÖ Reward claimed this week"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">300</span>, <span class="fs">"üéÅ PLATINUM reward unlocked!"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">150</span>, <span class="fs">"üéÅ Gold reward unlocked!"</span>,
<span class="fk">if</span>(prop(<span class="fs">"Total Points"</span>) >= <span class="fn">75</span>,  <span class="fs">"üéÅ Silver reward ready ‚Äî claim it!"</span>,
<span class="fs">"Keep going..."</span>))))</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Is Overdue (Tasks DB)</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Tasks DB ‚Üí Is Overdue (Text formula)</span>

<span class="fk">if</span>(
  prop(<span class="fs">"Status"</span>) != <span class="fs">"‚úÖ Done"</span> <span class="fk">and</span>
  prop(<span class="fs">"Due Date"</span>) < <span class="ff">now</span>(),
  <span class="fs">"üî¥ Overdue"</span>, <span class="fs">""</span>
)</code></div>
          </div>
        </div>

        <div class="toggle-wrap">
          <div class="toggle-head" onclick="tog(this)"><span class="toggle-arrow">‚ñ∂</span><span class="toggle-title">Week Identifier (Tasks & Daily Log)</span></div>
          <div class="toggle-body">
            <div class="fblock"><code><span class="fc">// Paste into Tasks DB ‚Üí Week AND Daily Log DB ‚Üí Week</span>
<span class="fc">// Groups everything by ISO week for rollup linking</span>

<span class="ff">formatDate</span>(prop(<span class="fs">"Due Date"</span>), <span class="fs">"YYYY-[W]WW"</span>)

<span class="fc">// For Daily Log, use "Date" instead of "Due Date":</span>
<span class="ff">formatDate</span>(prop(<span class="fs">"Date"</span>), <span class="fs">"YYYY-[W]WW"</span>)</code></div>
          </div>
        </div>
      </div>

      <!-- PAGE HIERARCHY -->
      <div id="hierarchy-tab" class="tab-pane" style="display:none;">
        <div class="callout c-v" style="margin-bottom:1rem;">
          <span class="ci">üìÅ</span>
          <div class="cb"><div class="cbtitle">Recommended Notion Page Hierarchy</div><div class="cbt">Build this structure in Notion. All pages use linked database views ‚Äî not duplicates. Keep databases in a /Databases folder, pages in /Workspace.</div></div>
        </div>
        <div class="fblock"><code><span class="fc">üìÅ FlowState OS (Root workspace)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üè† Today                    ‚Üê Linked views: Tasks + Daily Log</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ Energy Mode selector (Select property filter)</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ Top 3 Tasks (filtered: today, sorted by priority)</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ Mood Logger (Daily Log entry for today)</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ Brain Dump (text block ‚Üí convert to tasks)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üéØ Task Engine              ‚Üê Main Tasks database</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ View: All Active</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ View: Low Energy Mode</span>
<span class="fc">‚îÇ       ‚îú‚îÄ‚îÄ View: Medium / High Mode</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ View: Overdue (filter: Is Overdue = true)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üìÖ Daily Log                ‚Üê One entry per day</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ (Mood, Energy, Sprint count, Notes)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üìà Weekly Summary           ‚Üê Auto-aggregated via rollups</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ (Momentum Score, Tier, Burnout Risk, Reward)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üî• Focus Sprint             ‚Üê Timer embed or simple log</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üíô Emotional Layer          ‚Üê Linked view of Daily Log</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ (mood trends, burnout detection, notes)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üÜò Reset My Day             ‚Üê Static protocol page</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ (5-step toggle checklist, parking lot)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îú‚îÄ‚îÄ üìÖ Weekly Review            ‚Üê Linked Weekly Summary view</span>
<span class="fc">‚îÇ       ‚îî‚îÄ‚îÄ (review checklist template, wins log)</span>
<span class="fc">‚îÇ</span>
<span class="fc">‚îî‚îÄ‚îÄ ‚ö° Quick Start Guide        ‚Üê Setup instructions</span>
<span class="fc">        ‚îî‚îÄ‚îÄ (this architecture, daily routine, tips)</span></code></div>

        <div class="callout c-green" style="margin-top:.75rem;">
          <span class="ci">‚úÖ</span>
          <div class="cb"><div class="cbtitle">Build order</div><div class="cbt">1. Create Tasks DB ‚Üí 2. Create Daily Log DB ‚Üí 3. Create Weekly Summary DB ‚Üí 4. Set up Relations and Rollups ‚Üí 5. Add Formulas ‚Üí 6. Build linked views on Today page ‚Üí 7. Set up Notion Automations for Recovery Mode and Archive.</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- NEUROSCIENCE -->
  <div class="neuro-sec">
    <div class="slabel">// Why It Actually Works ‚Äî The Neuroscience</div>
    <div class="neuro-inner">
      <div class="neuro-grid">
        <div class="ni"><span class="ni-ico">üß†</span><div class="ni-nm">Dopamine Economy</div><div class="ni-ds">Points trigger real dopamine hits. Small wins compound into momentum. Science-backed reward loops built into every task.</div></div>
        <div class="ni"><span class="ni-ico">‚ö°</span><div class="ni-nm">Energy Matching</div><div class="ni-ds">ADHD brains are state-dependent. Wrong task + wrong energy = guaranteed failure. Right match = natural flow.</div></div>
        <div class="ni"><span class="ni-ico">üéØ</span><div class="ni-nm">Interest-Based Motivation</div><div class="ni-ds">ADHD is not a willpower problem. It's a dopamine regulation problem. FlowState OS addresses the root cause.</div></div>
        <div class="ni"><span class="ni-ico">üõ°Ô∏è</span><div class="ni-nm">Shame-Free Architecture</div><div class="ni-ds">No missed day punishments. No "failed" labels. Recovery built in at every layer. You always have a path forward.</div></div>
      </div>
    </div>
  </div>

  <!-- MANIFESTO -->
  <div class="man-sec">
    <div class="man-card">
      <div>
        <div class="man-q">Your brain isn't broken.<br><span>Your system was.</span></div>
        <div class="man-s">FlowState OS is engineered from the ground up for the ADHD mind ‚Äî dopamine-first design, energy-aware filtering, shame-free recovery, and momentum-based structure. Built by someone who lives this, for everyone who's been failed by "normal" productivity systems.</div>
      </div>
      <div class="chips">
        <div class="chip ch1">‚ö° Smart Task Engine</div>
        <div class="chip ch2">üß† Momentum Core</div>
        <div class="chip ch3">üî• Dopamine Economy</div>
        <div class="chip ch4">üíú Reset My Day</div>
      </div>
    </div>
  </div>

</div>

<!-- TOAST -->
<div class="toast" id="toastEl"><span id="toastMsg"></span></div>

<script>
// ‚îÄ‚îÄ CURSOR ‚îÄ‚îÄ
const cur=document.getElementById('cur'),cr=document.getElementById('cur-r');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cur.style.left=mx-4+'px';cur.style.top=my-4+'px';});
setInterval(()=>{rx+=(mx-rx)*.12;ry+=(my-ry)*.12;cr.style.left=rx-17+'px';cr.style.top=ry-17+'px';},16);

// ‚îÄ‚îÄ DATE ‚îÄ‚îÄ
const dn=new Date();
document.getElementById('hdate').textContent=dn.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'});

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let pts=127,tasksDone=14,sprintCount=8,lowMoodCount=0;
let sprintSecs=25*60,sprintMin=25,sprintRunning=false,sprintInt=null;
const stepsD=new Set();

// ‚îÄ‚îÄ TIER LOGIC ‚îÄ‚îÄ
function getTier(p){if(p>=300)return'üíé Platinum';if(p>=150)return'ü•á Gold';if(p>=75)return'ü•à Silver';if(p>=25)return'ü•â Bronze';return'üå± Starting';}
function getTierPct(p){if(p>=300)return 100;if(p>=150)return 75+((p-150)/150)*25;if(p>=75)return 50+((p-75)/75)*25;if(p>=25)return 25+((p-25)/50)*25;return(p/25)*25;}

// ‚îÄ‚îÄ UPDATE ALL POINTS (single source of truth) ‚îÄ‚îÄ
function updatePts(newPts,earned){
  pts=newPts;
  // big counter + bump
  const el=document.getElementById('bigPts');
  el.textContent=pts;
  el.classList.remove('bump');
  void el.offsetWidth;
  el.classList.add('bump');
  // earned flash
  if(earned){
    const e=document.getElementById('ptsEarned');
    e.textContent='+'+earned+' pts!';
    setTimeout(()=>e.textContent='',2200);
  }
  // header
  document.getElementById('ptsH').textContent=pts;
  document.getElementById('mPts').textContent=pts;
  // bar
  const pct=getTierPct(pts);
  document.getElementById('tierBar').style.width=pct+'%';
  // tier labels
  if(pts>=300){document.getElementById('tierCur').textContent='üíé Platinum ‚úì';document.getElementById('tierNxt').textContent='Max tier!';}
  else if(pts>=150){document.getElementById('tierCur').textContent='ü•á Gold ‚úì';document.getElementById('tierNxt').textContent='üíé Platinum at 300';}
  else if(pts>=75){document.getElementById('tierCur').textContent='ü•à Silver ‚úì';document.getElementById('tierNxt').textContent='ü•á Gold at 150';}
  else if(pts>=25){document.getElementById('tierCur').textContent='ü•â Bronze ‚úì';document.getElementById('tierNxt').textContent='ü•à Silver at 75';}
  else{document.getElementById('tierCur').textContent='üå± Starting';document.getElementById('tierNxt').textContent='ü•â Bronze at 25';}
  // active tier
  ['tb','ts','tg','tp'].forEach(id=>document.getElementById(id).classList.remove('active-t'));
  if(pts>=300)document.getElementById('tp').classList.add('active-t');
  else if(pts>=150)document.getElementById('tg').classList.add('active-t');
  else if(pts>=75)document.getElementById('ts').classList.add('active-t');
  else if(pts>=25)document.getElementById('tb').classList.add('active-t');
  // reward box
  const rb=document.getElementById('rewardBox');
  if(pts>=300)rb.innerHTML='üéÅ <strong>Platinum reward ready:</strong> You are legendary. Claim your ultimate reward!';
  else if(pts>=150)rb.innerHTML='üéÅ <strong>Gold reward ready:</strong> Outstanding week. Tap to claim!';
  else if(pts>=75)rb.innerHTML='üéÅ <strong>Silver reward ready:</strong> You\'ve unlocked your treat. Tap to claim it.';
  else rb.innerHTML='üéØ <strong>Keep going:</strong> Reach 75 pts to unlock your first reward.';
  // vault
  document.getElementById('vaultDs').textContent=getTier(pts).replace(/^\S+\s/,'')+' tier. Claim it.';
  // momentum ring
  const rp=Math.min(Math.round((pts/200)*100),100);
  document.getElementById('ringPct').textContent=rp+'%';
  const off=283-(283*rp/100);
  document.getElementById('ringC').style.strokeDashoffset=off;
  document.getElementById('momBar').style.width=Math.min(rp,100)+'%';
}

// ‚îÄ‚îÄ ENERGY ‚îÄ‚îÄ
function setEnergy(el,label){
  document.querySelectorAll('.en-card').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
  completeStep(1);
  toast('‚ö° '+label+' activated');
}

// ‚îÄ‚îÄ TASK TOGGLE ‚îÄ‚îÄ
function toggleTask(el,ep){
  el.classList.toggle('done');
  const cb=el.querySelector('.tcb');
  if(el.classList.contains('done')){
    cb.textContent='‚úì';tasksDone++;
    document.getElementById('mDone').textContent=tasksDone;
    updatePts(pts+ep,ep);
    toast('‚úÖ Task done! +'+ep+' pts ¬∑ Total: '+pts+' pts');
    completeStep(3);
    if(tasksDone===15)celebrate();
  }else{
    cb.textContent='';tasksDone--;
    document.getElementById('mDone').textContent=tasksDone;
    updatePts(pts-ep,null);
  }
}

function recoverOverdue(){
  updatePts(pts+10,10);
  toast('‚úÖ Weekly review done! +10 rescue pts ¬∑ Total: '+pts+' pts');
}

// ‚îÄ‚îÄ SUBTASKS ‚îÄ‚îÄ
function toggleSub(e,btn){
  e.stopPropagation();
  const t=btn.closest('.task');
  const d=t.nextElementSibling;
  if(d&&d.classList.contains('sub-drawer')){
    d.classList.toggle('open');
    btn.textContent=d.classList.contains('open')?'‚ñæ 3 steps':'‚ñ∏ 3 steps';
  }
}

// ‚îÄ‚îÄ MOOD ‚îÄ‚îÄ
function setMood(el,label,score){
  document.querySelectorAll('.mb').forEach(b=>b.classList.remove('sel'));
  el.classList.add('sel');
  document.getElementById('moodLbl').textContent=label+' ‚Äî Logged';
  if(score<=1){lowMoodCount++;if(lowMoodCount>=3)document.getElementById('burnout').classList.add('show');}
  completeStep(2);
  toast('üòå Mood logged: '+label);
}

// ‚îÄ‚îÄ SETUP ‚îÄ‚îÄ
function completeStep(n){
  if(stepsD.has(n))return;
  stepsD.add(n);
  const el=document.getElementById('s'+n);
  if(el){el.classList.add('done');el.classList.remove('active-s');}
  const pct=Math.round((stepsD.size/5)*100);
  document.getElementById('setupPct').textContent=pct+'%';
  document.getElementById('setupFill').style.width=pct+'%';
  if(stepsD.size===5){updatePts(pts+25,25);toast('üéâ Setup complete! +25 bonus pts');celebrate();}
}

// ‚îÄ‚îÄ BRAIN DUMP ‚îÄ‚îÄ
document.getElementById('dumpTa').addEventListener('input',function(){
  const l=this.value.split('\n').filter(x=>x.trim()).length;
  document.getElementById('dumpCt').textContent=l+' thought'+(l!==1?'s':'')+' captured';
  document.getElementById('dumpTip').style.display=l>0?'block':'none';
  if(l>0)completeStep(4);
});
function convertDump(){
  const ta=document.getElementById('dumpTa');
  if(!ta.value.trim()){toast('üí° Type some thoughts first!');return;}
  const l=ta.value.split('\n').filter(x=>x.trim()).length;
  completeStep(4);
  toast('‚úÖ '+l+' thought'+(l!==1?'s':'')+' added to Task Engine!');
  ta.value='';document.getElementById('dumpCt').textContent='0 thoughts captured';
  document.getElementById('dumpTip').style.display='none';
}

// ‚îÄ‚îÄ SPRINT ‚îÄ‚îÄ
function openSprint(){document.getElementById('sprintOv').classList.add('open');completeStep(5);}
function closeSprint(){
  document.getElementById('sprintOv').classList.remove('open');
  if(sprintInt){clearInterval(sprintInt);sprintInt=null;sprintRunning=false;}
  document.getElementById('sprintBtn').textContent='‚ñ∂ Start Sprint';
}
function setSD(m,el){
  if(sprintRunning)return;
  sprintMin=m;sprintSecs=m*60;
  document.getElementById('sprintDisp').textContent=m+':00';
  document.querySelectorAll('.ss-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
}
function toggleSprint(){
  if(sprintRunning){
    clearInterval(sprintInt);sprintInt=null;sprintRunning=false;
    document.getElementById('sprintBtn').textContent='‚ñ∂ Resume';
  }else{
    sprintRunning=true;
    document.getElementById('sprintBtn').textContent='‚è∏ Pause';
    sprintInt=setInterval(()=>{
      sprintSecs--;
      const m=Math.floor(sprintSecs/60),s=sprintSecs%60;
      document.getElementById('sprintDisp').textContent=m+':'+String(s).padStart(2,'0');
      if(sprintSecs<=0){
        clearInterval(sprintInt);sprintInt=null;sprintRunning=false;
        sprintCount++;document.getElementById('mSprints').textContent=sprintCount;
        updatePts(pts+10,10);
        document.getElementById('sprintBtn').textContent='‚ñ∂ Start Sprint';
        closeSprint();celebrate();
        toast('üî• Sprint done! +10 pts ¬∑ Total: '+pts+' pts');
      }
    },1000);
  }
}

// ‚îÄ‚îÄ RESET ‚îÄ‚îÄ
function openReset(){document.getElementById('resetCard').scrollIntoView({behavior:'smooth'});document.getElementById('ritual').classList.toggle('open');}
function doneR(el){
  el.classList.toggle('dr');
  if([...document.querySelectorAll('.rstep')].every(r=>r.classList.contains('dr'))){
    updatePts(pts+5,5);toast('üéâ Reset done! +5 recovery pts. You showed up for yourself.');
  }
}

// ‚îÄ‚îÄ REWARD ‚îÄ‚îÄ
function claimReward(){
  celebrate();
  toast('üèÜ '+getTier(pts)+' reward claimed! You earned this.');
}

// ‚îÄ‚îÄ DB TABS ‚îÄ‚îÄ
function showTab(id,el){
  document.querySelectorAll('.tab-pane').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.db-tab').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
}

// ‚îÄ‚îÄ NOTION TOGGLES ‚îÄ‚îÄ
function tog(head){
  head.classList.toggle('open');
  const b=head.nextElementSibling;
  b.classList.toggle('open');
}

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
let toastT;
function toast(msg){
  const el=document.getElementById('toastEl');
  document.getElementById('toastMsg').textContent=msg;
  el.classList.add('show');
  clearTimeout(toastT);
  toastT=setTimeout(()=>el.classList.remove('show'),3200);
}

// ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ
function celebrate(){
  const c=document.getElementById('cf');
  const cols=['#7c3aed','#d946ef','#f59e0b','#10b981','#f43f5e','#06b6d4','#a855f7'];
  for(let i=0;i<42;i++){
    const p=document.createElement('div');
    p.className='cp';
    p.style.cssText=`left:${Math.random()*100}%;top:0;background:${cols[Math.floor(Math.random()*cols.length)]};transform:rotate(${Math.random()*360}deg);animation-delay:${Math.random()*.55}s;animation-duration:${2+Math.random()}s;`;
    c.appendChild(p);
    setTimeout(()=>p.remove(),3500);
  }
}

// ‚îÄ‚îÄ STREAK ANIMATION ‚îÄ‚îÄ
document.querySelectorAll('.sday').forEach((d,i)=>{
  setTimeout(()=>{d.style.transition='all .45s cubic-bezier(.34,1.56,.64,1)';d.style.opacity='1';d.style.transform='scale(1)';},700+i*90);
});

// ‚îÄ‚îÄ INIT RING ‚îÄ‚îÄ
setTimeout(()=>{const o=283-(283*.65);document.getElementById('ringC').style.strokeDashoffset=o;},600);
</script>
</body>
</html>
